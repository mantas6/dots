#!/usr/bin/env bash
# Rename files/folders: spaces to underscores, uppercase to lowercase

for dir in "$@"; do
    find "$dir" -depth ! -path "*/.*" | while IFS= read -r path; do
        parent=$(dirname "$path")
        name=$(basename "$path")
        newname="${name// /_}"
        newname="${newname,,}"

        [[ "$name" == "$newname" ]] && continue

        mv -v "$path" "$parent/$newname"
    done
done
