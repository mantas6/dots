#!/usr/bin/env sh
# Show menu selection

cmd='fzf -i'
wm_mode=''
prompt=''

while getopts 'gi:' opt; do
  case ${opt} in
    g)
        wm_mode=1
        ;;
    i)
        prompt=${OPTARG}
        ;;
    ?)
      echo "Invalid option: -${OPTARG}."
      exit 1
      ;;
  esac
done

if [ -n "$wm_mode" ]; then
    if [ "$(uname)" = 'Darwin' ]; then
        cmd='choose'
    else
        cmd='rofi -dmenu'
    fi
fi

if [ -n "$prompt" ]; then
    $cmd
else
    items=$(cat)
    echo "$items" | $cmd
fi
