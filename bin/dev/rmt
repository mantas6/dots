#!/usr/bin/env bash
# Override remote variable for different env

if [ $# -lt 2 ]; then
    echo 'Usage: rmt <env-name> [CMD]' >&2
    exit 1
fi

name=${1^^}
shift

user="REMOTE_${name}_USER"
host="REMOTE_${name}_HOST"
root="REMOTE_${name}_ROOT"

export REMOTE_USER=${!user}
export REMOTE_HOST=${!host}
export REMOTE_ROOT=${!root}

printf '%s' "Confirm running cmd in $name environment..."
read -r || exit 1

exec "$@"
